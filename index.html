<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù†Ø´Ø¦ ØµÙØ­Ø§Øª Ø§Ù„Ù‡Ø¨ÙˆØ·</title>
<style>
:root {
  --primary: #6366f1;
  --primary-hover: #4f46e5;
  --bg-dark: #020617;
  --bg-panel: rgba(15, 23, 42, 0.8);
  --bg-card: rgba(30, 41, 59, 0.6);
  --text-primary: #f8fafc;
  --text-secondary: #94a3b8;
  --border: rgba(148, 163, 184, 0.2);
  --success: #22c55e;
  --warning: #f59e0b;
  --danger: #ef4444;
  --glass: rgba(255, 255, 255, 0.05);
  --radius: 12px;
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
}
.light-mode {
  --bg-dark: #f1f5f9;
  --bg-panel: rgba(255, 255, 255, 0.9);
  --bg-card: rgba(241, 245, 249, 0.8);
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --border: rgba(51, 65, 85, 0.2);
  --glass: rgba(0, 0, 0, 0.02);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
@font-face {
  font-family: 'Cairo';
  src: local('Cairo'), local('Arial');
  font-weight: 400 700;
}
body {
  font-family: 'Cairo', 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg-dark);
  color: var(--text-primary);
  min-height: 100vh;
  line-height: 1.6;
}
.app-container {
  display: grid;
  grid-template-columns: 420px 1fr;
  min-height: 100vh;
}
@media (max-width: 1024px) {
  .app-container { grid-template-columns: 1fr; }
  .preview-panel { display: none; }
  .control-panel { width: 100%; }
}
.control-panel {
  background: var(--bg-panel);
  backdrop-filter: blur(20px);
  border-left: 1px solid var(--border);
  height: 100vh;
  overflow-y: auto;
  padding: 20px;
}
.control-panel::-webkit-scrollbar { width: 6px; }
.control-panel::-webkit-scrollbar-track { background: transparent; }
.control-panel::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 20px;
}
.logo {
  font-size: 1.25rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--primary), #a855f7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.header-actions { display: flex; gap: 8px; }
.icon-btn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--glass);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.icon-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }
.tabs { display: flex; gap: 4px; margin-bottom: 20px; background: var(--glass); padding: 4px; border-radius: 10px; }
.tab {
  flex: 1;
  padding: 10px 16px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  border-radius: 8px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  transition: all 0.2s;
}
.tab.active { background: var(--primary); color: white; }
.tab:hover:not(.active) { color: var(--text-primary); }
.tab-content { display: none; }
.tab-content.active { display: block; }
.section-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 12px;
  overflow: hidden;
}
.section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  cursor: pointer;
  transition: background 0.2s;
}
.section-header:hover { background: var(--glass); }
.section-toggle {
  width: 40px;
  height: 22px;
  background: var(--border);
  border-radius: 11px;
  position: relative;
  cursor: pointer;
  transition: background 0.2s;
}
.section-toggle.active { background: var(--primary); }
.section-toggle::after {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  background: white;
  border-radius: 50%;
  top: 2px;
  right: 2px;
  transition: transform 0.2s;
}
.section-toggle.active::after { transform: translateX(-18px); }
.section-title { flex: 1; font-weight: 600; font-size: 0.9rem; }
.section-actions { display: flex; gap: 4px; }
.section-btn {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: none;
  background: var(--glass);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}
.section-btn:hover { background: var(--primary); color: white; }
.section-content { padding: 16px; border-top: 1px solid var(--border); display: none; }
.section-content.open { display: block; }
.form-group { margin-bottom: 16px; }
.form-label { display: block; font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 6px; }
.form-input, .form-textarea, .form-select {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--glass);
  color: var(--text-primary);
  font-family: inherit;
  font-size: 0.9rem;
  transition: border-color 0.2s;
}
.form-input:focus, .form-textarea:focus, .form-select:focus { outline: none; border-color: var(--primary); }
.form-textarea { min-height: 80px; resize: vertical; }
.form-select { cursor: pointer; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.color-input-wrap { display: flex; gap: 8px; align-items: center; }
.color-input {
  width: 44px;
  height: 36px;
  border: 1px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  padding: 2px;
}
.file-upload {
  border: 2px dashed var(--border);
  border-radius: 8px;
  padding: 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
}
.file-upload:hover { border-color: var(--primary); background: var(--glass); }
.file-upload input { display: none; }
.file-upload-icon { font-size: 2rem; margin-bottom: 8px; }
.file-upload-text { font-size: 0.85rem; color: var(--text-secondary); }
.uploaded-preview { margin-top: 10px; }
.uploaded-preview img, .uploaded-preview video { max-width: 100%; border-radius: 6px; }
.btn {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-family: inherit;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: var(--primary-hover); transform: translateY(-1px); }
.btn-secondary { background: var(--glass); color: var(--text-primary); border: 1px solid var(--border); }
.btn-secondary:hover { background: var(--border); }
.btn-danger { background: var(--danger); color: white; }
.btn-danger:hover { background: #dc2626; }
.btn-block { width: 100%; }
.btn-group { display: flex; gap: 8px; margin-top: 16px; }
.slider-wrap { display: flex; align-items: center; gap: 12px; }
.slider {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  background: var(--border);
  border-radius: 3px;
  outline: none;
}
.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
}
.slider-value { min-width: 40px; text-align: center; font-size: 0.85rem; color: var(--text-secondary); }
.dynamic-list { margin-top: 12px; }
.dynamic-item {
  background: var(--glass);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
}
.dynamic-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}
.dynamic-item-title { font-weight: 600; font-size: 0.85rem; }
.add-item-btn {
  width: 100%;
  padding: 10px;
  border: 2px dashed var(--border);
  border-radius: 8px;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  font-family: inherit;
  transition: all 0.2s;
}
.add-item-btn:hover { border-color: var(--primary); color: var(--primary); }
.template-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
.template-card {
  background: var(--bg-card);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s;
}
.template-card:hover { border-color: var(--primary); transform: translateY(-2px); }
.template-card.selected { border-color: var(--primary); background: rgba(99, 102, 241, 0.1); }
.template-name { font-weight: 600; margin-bottom: 4px; }
.template-desc { font-size: 0.8rem; color: var(--text-secondary); }
.preview-panel {
  background: var(--bg-dark);
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.preview-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  background: var(--bg-panel);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
}
.preview-title { font-weight: 600; }
.preview-actions { display: flex; gap: 8px; }
.device-toggle { display: flex; gap: 4px; background: var(--glass); padding: 4px; border-radius: 8px; }
.device-btn {
  padding: 6px 12px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.8rem;
  transition: all 0.2s;
}
.device-btn.active { background: var(--primary); color: white; }
.preview-frame-wrap {
  flex: 1;
  padding: 20px;
  overflow: auto;
  display: flex;
  justify-content: center;
}
.preview-frame {
  background: white;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  width: 100%;
  max-width: 100%;
  height: fit-content;
  min-height: 100%;
  overflow: hidden;
  transition: max-width 0.3s;
}
.preview-frame.tablet { max-width: 768px; }
.preview-frame.mobile { max-width: 375px; }
.preview-content { padding: 0; }
.export-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border); }
.code-preview {
  background: #0f172a;
  border-radius: 8px;
  padding: 16px;
  max-height: 300px;
  overflow: auto;
  margin-top: 12px;
}
.code-preview pre {
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.75rem;
  color: #e2e8f0;
  white-space: pre-wrap;
  word-break: break-all;
}
.notification {
  position: fixed;
  bottom: 20px;
  left: 20px;
  padding: 12px 20px;
  background: var(--success);
  color: white;
  border-radius: 8px;
  font-size: 0.9rem;
  z-index: 1000;
  animation: slideIn 0.3s ease;
}
@keyframes slideIn { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 10px; }
.gallery-item { position: relative; aspect-ratio: 1; border-radius: 6px; overflow: hidden; }
.gallery-item img { width: 100%; height: 100%; object-fit: cover; }
.gallery-item-remove {
  position: absolute;
  top: 4px;
  left: 4px;
  width: 20px;
  height: 20px;
  background: var(--danger);
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
}
.undo-redo { display: flex; gap: 4px; }
</style>
</head>
<body>
<div class="app-container">
  <div class="control-panel">
    <div class="panel-header">
      <div class="logo">Ù…Ù†Ø´Ø¦ ØµÙØ­Ø§Øª Ø§Ù„Ù‡Ø¨ÙˆØ·</div>
      <div class="header-actions">
        <div class="undo-redo">
          <button class="icon-btn" onclick="undo()" title="ØªØ±Ø§Ø¬Ø¹">â†©</button>
          <button class="icon-btn" onclick="redo()" title="Ø¥Ø¹Ø§Ø¯Ø©">â†ª</button>
        </div>
        <button class="icon-btn" onclick="toggleTheme()" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹" id="themeToggle">ğŸŒ™</button>
        <button class="icon-btn" onclick="resetProject()" title="Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†">ğŸ”„</button>
      </div>
    </div>
    <div class="tabs">
      <button class="tab active" data-tab="sections">Ø§Ù„Ø£Ù‚Ø³Ø§Ù…</button>
      <button class="tab" data-tab="design">Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
      <button class="tab" data-tab="templates">Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨</button>
      <button class="tab" data-tab="export">Ø§Ù„ØªØµØ¯ÙŠØ±</button>
    </div>
    <div id="sectionsTab" class="tab-content active">
      <div id="sectionsList"></div>
    </div>
    <div id="designTab" class="tab-content">
      <div class="section-card">
        <div class="section-header" onclick="toggleSectionContent('layoutSettings')">
          <div class="section-title">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠØ·</div>
        </div>
        <div class="section-content open" id="content-layoutSettings">
          <div class="form-group">
            <label class="form-label">Ù†Ù…Ø· Ø§Ù„ØµÙØ­Ø©</label>
            <select class="form-select" onchange="projectData.pageMode=this.value; updatePreview(); saveState();">
              <option value="single" ${projectData.pageMode==='single'?'selected':''}>ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© (ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©)</option>
              <option value="multi" ${projectData.pageMode==='multi'?'selected':''}>ØµÙØ­Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ø§Ù†Ø¨ÙŠØ©</option>
            </select>
            <small style="display:block;margin-top:8px;opacity:0.7;">
              â€¢ Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙÙŠ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø©<br>
              â€¢ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©: ÙƒÙ„ Ù‚Ø³Ù… ÙÙŠ ØµÙØ­Ø© Ù…Ù†ÙØµÙ„Ø© Ù…Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„ØªÙ†Ù‚Ù„
            </small>
          </div>
        </div>
      </div>
      <div class="section-card">
        <div class="section-content open">
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ø®Ø·</label>
            <select class="form-select" id="fontFamily" onchange="updateDesign()">
              <option value="'Cairo', 'Segoe UI', system-ui, sans-serif">Cairo</option>
              <option value="'Segoe UI', system-ui, sans-serif">System UI</option>
              <option value="'Inter', sans-serif">Inter</option>
              <option value="'Tajawal', sans-serif">Tajawal</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
            <div class="color-input-wrap">
              <input type="color" class="color-input" id="primaryColor" value="#6366f1" onchange="updateDesign()">
              <input type="text" class="form-input" id="primaryColorText" value="#6366f1" onchange="syncColor('primary')">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
            <div class="color-input-wrap">
              <input type="color" class="color-input" id="bgColor" value="#020617" onchange="updateDesign()">
              <input type="text" class="form-input" id="bgColorText" value="#020617" onchange="syncColor('bg')">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ù„ÙˆÙ† Ø§Ù„Ù†Øµ</label>
            <div class="color-input-wrap">
              <input type="color" class="color-input" id="textColor" value="#f8fafc" onchange="updateDesign()">
              <input type="text" class="form-input" id="textColorText" value="#f8fafc" onchange="syncColor('text')">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ø­Ø´Ùˆ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</label>
            <div class="slider-wrap">
              <input type="range" class="slider" id="paddingSlider" min="20" max="100" value="60" onchange="updateDesign()">
              <span class="slider-value" id="paddingValue">60px</span>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Ø£Ù‚ØµÙ‰ Ø¹Ø±Ø¶</label>
            <select class="form-select" id="maxWidth" onchange="updateDesign()">
              <option value="1200px">1200px</option>
              <option value="1400px">1400px</option>
              <option value="100%">ÙƒØ§Ù…Ù„ Ø§Ù„Ø¹Ø±Ø¶</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div id="templatesTab" class="tab-content">
      <div class="template-grid">
        <div class="template-card" onclick="loadTemplate('saas')">
          <div class="template-name">ğŸš€ Ù‚Ø§Ù„Ø¨ SaaS</div>
          <div class="template-desc">Ù…Ø«Ø§Ù„ÙŠ Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©</div>
        </div>
        <div class="template-card" onclick="loadTemplate('app')">
          <div class="template-name">ğŸ“± Ù‚Ø§Ù„Ø¨ ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„</div>
          <div class="template-desc">Ù„Ø¹Ø±Ø¶ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>
        </div>
        <div class="template-card" onclick="loadTemplate('personal')">
          <div class="template-name">ğŸ‘¤ Ù‚Ø§Ù„Ø¨ Ø´Ø®ØµÙŠ</div>
          <div class="template-desc">Ù„Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†</div>
        </div>
      </div>
    </div>
    <div id="exportTab" class="tab-content">
      <div class="btn-group" style="flex-direction: column;">
        <button class="btn btn-primary btn-block" onclick="downloadHTML()">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙƒÙ€ HTML</button>
        <button class="btn btn-secondary btn-block" onclick="copyCode()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
        <button class="btn btn-secondary btn-block" onclick="exportJSON()">ğŸ’¾ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (JSON)</button>
        <button class="btn btn-secondary btn-block" onclick="document.getElementById('importJSON').click()">ğŸ“‚ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ø´Ø±ÙˆØ¹</button>
        <input type="file" id="importJSON" accept=".json" style="display:none" onchange="importJSON(event)">
      </div>
      <div class="code-preview">
        <pre id="codeOutput"></pre>
      </div>
    </div>
    <div class="export-section">
      <button class="btn btn-primary btn-block" onclick="applyChanges()">âœ¨ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
    </div>
  </div>
  <div class="preview-panel">
    <div class="preview-header">
      <div class="preview-title">Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</div>
      <div class="preview-actions">
        <div class="device-toggle">
          <button class="device-btn active" onclick="setDevice('desktop')">ğŸ–¥ï¸</button>
          <button class="device-btn" onclick="setDevice('tablet')">ğŸ“±</button>
          <button class="device-btn" onclick="setDevice('mobile')">ğŸ“²</button>
        </div>
      </div>
    </div>
    <div class="preview-frame-wrap">
      <div class="preview-frame" id="previewFrame">
        <div class="preview-content" id="previewContent"></div>
      </div>
    </div>
  </div>
</div>
<script>
const sectionsConfig = [
  { id: 'hero', name: 'Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Hero)', enabled: true, order: 0 },
  { id: 'features', name: 'Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª', enabled: true, order: 1 },
  { id: 'expandedFeatures', name: 'Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©', enabled: false, order: 1.5 },
  { id: 'video', name: 'Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', enabled: false, order: 2 },
  { id: 'gallery', name: 'Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±', enabled: false, order: 3 },
  { id: 'testimonials', name: 'Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡', enabled: true, order: 4 },
  { id: 'pricing', name: 'Ø§Ù„Ø£Ø³Ø¹Ø§Ø±', enabled: true, order: 5 },
  { id: 'faq', name: 'Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©', enabled: true, order: 6 },
  { id: 'about', name: 'Ù…Ù† Ù†Ø­Ù†', enabled: false, order: 7 },
  { id: 'contact', name: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§', enabled: true, order: 8 },
  { id: 'footer', name: 'Ø§Ù„ØªØ°ÙŠÙŠÙ„', enabled: true, order: 9 }
];

let projectData = {
  pageMode: 'single', // 'single' Ø£Ùˆ 'multi' - ÙˆØ¶Ø¹ Ø§Ù„ØµÙØ­Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ø£Ùˆ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©
  pages: [ // Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©
    { id: 'home', name: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', sections: ['hero', 'features', 'expandedFeatures', 'testimonials', 'cta'] },
    { id: 'services', name: 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª', sections: ['hero', 'services', 'cta'] },
    { id: 'about', name: 'Ù…Ù† Ù†Ø­Ù†', sections: ['about', 'team', 'contact'] }
  ],
  sections: JSON.parse(JSON.stringify(sectionsConfig)),
  design: {
    font: "'Cairo', 'Segoe UI', system-ui, sans-serif",
    primaryColor: '#6366f1',
    bgColor: '#020617',
    textColor: '#f8fafc',
    padding: 60,
    maxWidth: '1200px'
  },
  hero: {
    bgType: 'gradient',
    bgImage: '',
    bgVideo: '',
    overlayColor: '#000000',
    overlayOpacity: 0.5,
    brandName: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬',
    headline: 'Ø¹Ù†ÙˆØ§Ù† Ø±Ø¦ÙŠØ³ÙŠ Ø¬Ø°Ø§Ø¨ Ù„ØµÙØ­Ø© Ø§Ù„Ù‡Ø¨ÙˆØ·',
    subtitle: 'ÙˆØµÙ Ù…Ø®ØªØµØ± ÙŠÙˆØ¶Ø­ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙŠ ØªÙ‚Ø¯Ù…Ù‡Ø§ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡',
    ctaText: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†',
    ctaLink: '#',
    ctaSecondary: 'Ø§Ø¹Ø±Ù Ø§Ù„Ù…Ø²ÙŠØ¯',
    ctaSecondaryLink: '#',
    showBadges: true,
    showShapes: true
  },
  features: {
    title: 'Ù…Ù…ÙŠØ²Ø§ØªÙ†Ø§ Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©',
    description: 'Ø§ÙƒØªØ´Ù Ù…Ø§ ÙŠÙ…ÙŠØ²Ù†Ø§ Ø¹Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†',
    columns: 3,
    style: 'card',
    items: [
      { icon: 'ğŸš€', title: 'Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹', description: 'Ø£Ø¯Ø§Ø¡ Ø¹Ø§Ù„ÙŠ ÙˆØ³Ø±Ø¹Ø© ÙØ§Ø¦Ù‚Ø© ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„' },
      { icon: 'ğŸ”’', title: 'Ø¢Ù…Ù† ØªÙ…Ø§Ù…Ø§Ù‹', description: 'Ø­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ' },
      { icon: 'ğŸ’¡', title: 'Ø³Ù‡Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…', description: 'ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆØ³Ù‡Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹' },
      { icon: 'ğŸ¨', title: 'ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ', description: 'ØªØµÙ…ÙŠÙ… Ø­Ø¯ÙŠØ« ÙˆØ£Ù†ÙŠÙ‚ ÙŠÙ†Ø§Ø³Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©' },
      { icon: 'ğŸ“±', title: 'Ù…ØªØ¬Ø§ÙˆØ¨', description: 'ÙŠØ¹Ù…Ù„ Ø¨Ø³Ù„Ø§Ø³Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©' },
      { icon: 'ğŸŒ', title: 'Ø¯Ø¹Ù… Ø¹Ø§Ù„Ù…ÙŠ', description: 'Ø¯Ø¹Ù… ÙÙ†ÙŠ Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø©' }
    ]
  },
  expandedFeatures: {
    title: 'Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©',
    description: 'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø¨Ø·Ø§Ù‚Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©',
    items: [
      { icon: 'âš¡', title: 'Ø£Ø¯Ø§Ø¡ Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹', shortDesc: 'Ø§Ø³ØªØ¬Ø§Ø¨Ø© ÙÙˆØ±ÙŠØ©', fullDesc: 'ØªØ­Ù…ÙŠÙ„ ÙØ§Ø¦Ù‚ Ø§Ù„Ø³Ø±Ø¹Ø© Ø¨Ø£Ù‚Ù„ Ù…Ù† 1 Ø«Ø§Ù†ÙŠØ© Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©', image: '', cta: 'Ø§Ø¹Ø±Ù Ø£ÙƒØ«Ø±', ctaLink: '#' },
      { icon: 'ğŸ”', title: 'Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø£ÙˆÙ„', shortDesc: 'Ø­Ù…Ø§ÙŠØ© Ø¹Ø§Ù„ÙŠØ©', fullDesc: 'ØªØ´ÙÙŠØ± Ù…Ù† Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ© ÙˆØ­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ', image: '', cta: 'Ø§Ù„Ù…Ø²ÙŠØ¯', ctaLink: '#' },
      { icon: 'ğŸ¯', title: 'Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©', shortDesc: 'Ù†ØªØ§Ø¦Ø¬ Ù…Ø«Ø§Ù„ÙŠØ©', fullDesc: 'ØªÙ‚Ù†ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ¶Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø©', image: '', cta: 'ØªØ¹Ø±Ù Ø£ÙƒØ«Ø±', ctaLink: '#' }
    ]
  },
  video: {
    title: 'Ø´Ø§Ù‡Ø¯ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„',
    description: 'ÙÙŠØ¯ÙŠÙˆ ØªÙˆØ¶ÙŠØ­ÙŠ Ù‚ØµÙŠØ±',
    videoUrl: '',
    videoBase64: '',
    posterImage: ''
  },
  gallery: {
    title: 'Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±',
    images: []
  },
  testimonials: {
    title: 'Ù…Ø§Ø°Ø§ ÙŠÙ‚ÙˆÙ„ Ø¹Ù…Ù„Ø§Ø¤Ù†Ø§',
    layout: 'grid',
    items: [
      { name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', role: 'Ù…Ø¯ÙŠØ± ØªØ³ÙˆÙŠÙ‚', quote: 'Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø© ÙˆÙØ±ÙŠÙ‚ Ù…Ø­ØªØ±Ù. Ø£Ù†ØµØ­ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø¨Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ù….', avatar: '' },
      { name: 'Ø³Ø§Ø±Ø© Ø¹Ù„ÙŠ', role: 'Ù…ØµÙ…Ù…Ø©', quote: 'ØªØ¬Ø±Ø¨Ø© Ø±Ø§Ø¦Ø¹Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„Ù†Ù‡Ø§ÙŠØ©. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ…!', avatar: '' },
      { name: 'Ø®Ø§Ù„Ø¯ Ø£Ø­Ù…Ø¯', role: 'Ù…Ø·ÙˆØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', quote: 'Ø£ÙØ¶Ù„ Ø§Ø³ØªØ«Ù…Ø§Ø± Ù‚Ù…Øª Ø¨Ù‡ Ù„Ø¹Ù…Ù„ÙŠ. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø°Ù‡Ù„Ø©!', avatar: '' }
    ]
  },
  pricing: {
    title: 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©',
    subtitle: 'Ø£Ø³Ø¹Ø§Ø± ØªÙ†Ø§ÙØ³ÙŠØ© ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¬Ù…ÙŠØ¹',
    plans: [
      { name: 'Ø£Ø³Ø§Ø³ÙŠ', price: '99', description: 'Ù„Ù„Ø£ÙØ±Ø§Ø¯', features: ['5 Ù…Ø´Ø§Ø±ÙŠØ¹', 'Ø¯Ø¹Ù… Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯', '1GB ØªØ®Ø²ÙŠÙ†'], cta: 'Ø§Ø¨Ø¯Ø£ Ù…Ø¬Ø§Ù†Ø§Ù‹', ctaLink: '#', popular: false },
      { name: 'Ø§Ø­ØªØ±Ø§ÙÙŠ', price: '199', description: 'Ù„Ù„ÙØ±Ù‚ Ø§Ù„ØµØºÙŠØ±Ø©', features: ['20 Ù…Ø´Ø±ÙˆØ¹', 'Ø¯Ø¹Ù… Ø£ÙˆÙ„ÙˆÙŠØ©', '10GB ØªØ®Ø²ÙŠÙ†', 'ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©'], cta: 'Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†', ctaLink: '#', popular: true },
      { name: 'Ù…Ø¤Ø³Ø³ÙŠ', price: '499', description: 'Ù„Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©', features: ['Ù…Ø´Ø§Ø±ÙŠØ¹ ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯Ø©', 'Ø¯Ø¹Ù… 24/7', 'ØªØ®Ø²ÙŠÙ† ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯', 'API ÙƒØ§Ù…Ù„'], cta: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§', ctaLink: '#', popular: false }
    ]
  },
  faq: {
    title: 'Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©',
    items: [
      { question: 'ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¨Ø¯Ø¡ØŸ', answer: 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø¬Ø§Ù†Ø§Ù‹ ÙˆØ§Ù„Ø¨Ø¯Ø¡ ÙÙˆØ±Ø§Ù‹ ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©.' },
      { question: 'Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ÙØªØ±Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©ØŸ', answer: 'Ù†Ø¹Ù…ØŒ Ù†Ù‚Ø¯Ù… ÙØªØ±Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ù…Ø¯Ø© 14 ÙŠÙˆÙ…Ø§Ù‹ Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª.' },
      { question: 'Ù…Ø§ Ù‡ÙŠ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ', answer: 'Ù†Ù‚Ø¨Ù„ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ØŒ PayPalØŒ ÙˆØ§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ.' }
    ]
  },
  about: {
    title: 'Ù…Ù† Ù†Ø­Ù†',
    description: 'Ù†Ø­Ù† ÙØ±ÙŠÙ‚ Ø´ØºÙˆÙ Ø¨Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù†Ø³Ø¹Ù‰ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ù„Ø¹Ù…Ù„Ø§Ø¦Ù†Ø§ Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù….',
    image: '',
    stats: [
      { number: '10K+', label: 'Ø¹Ù…ÙŠÙ„ Ø³Ø¹ÙŠØ¯' },
      { number: '50+', label: 'Ø¯ÙˆÙ„Ø©' },
      { number: '99%', label: 'Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡' }
    ]
  },
  contact: {
    title: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§',
    description: 'Ù†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ. Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¨Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±',
    email: 'info@example.com',
    phone: '+966 50 000 0000',
    address: 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©',
    whatsapp: '+966500000000',
    twitter: '',
    instagram: '',
    youtube: '',
    tiktok: '',
    mapUrl: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3624.1826537252703!2d46.6759!3d24.7136!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e2f03890d22d191%3A0xf20691eeae01e0bb!2sRiyadh!5e0!3m2!1sen!2ssa!4v1234567890'
  },
  footer: {
    logo: '',
    description: 'Ù†Ø¨Ù†ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù…Ø¹Ø§Ù‹',
    copyright: 'Â© 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©',
    links: []
  }
};

let history = [];
let historyIndex = -1;
let isDarkMode = true;

function saveState() {
  const state = JSON.stringify(projectData);
  if (history[historyIndex] !== state) {
    history = history.slice(0, historyIndex + 1);
    history.push(state);
    historyIndex++;
    if (history.length > 50) {
      history.shift();
      historyIndex--;
    }
  }
  localStorage.setItem('landingPageBuilder', state);
}

function undo() {
  if (historyIndex > 0) {
    historyIndex--;
    projectData = JSON.parse(history[historyIndex]);
    renderSections();
    updatePreview();
    showNotification('ØªÙ… Ø§Ù„ØªØ±Ø§Ø¬Ø¹');
  }
}

function redo() {
  if (historyIndex < history.length - 1) {
    historyIndex++;
    projectData = JSON.parse(history[historyIndex]);
    renderSections();
    updatePreview();
    showNotification('ØªÙ… Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø©');
  }
}

function init() {
  const saved = localStorage.getItem('landingPageBuilder');
  if (saved) {
    try {
      projectData = JSON.parse(saved);
    } catch(e) {}
  }
  history.push(JSON.stringify(projectData));
  historyIndex = 0;
  setupTabs();
  renderSections();
  updateDesignInputs();
  updatePreview();
}

function setupTabs() {
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById(tab.dataset.tab + 'Tab').classList.add('active');
    });
  });
}

function renderSections() {
  const container = document.getElementById('sectionsList');
  const sorted = [...projectData.sections].sort((a, b) => a.order - b.order);
  container.innerHTML = sorted.map((section, idx) => `
    <div class="section-card" data-id="${section.id}">
      <div class="section-header" onclick="toggleSectionContent('${section.id}')">
        <div class="section-toggle ${section.enabled ? 'active' : ''}" onclick="event.stopPropagation(); toggleSection('${section.id}')"></div>
        <div class="section-title">${section.name}</div>
        <div class="section-actions">
          <button class="section-btn" onclick="event.stopPropagation(); moveSection('${section.id}', -1)" ${idx === 0 ? 'disabled' : ''}>â–²</button>
          <button class="section-btn" onclick="event.stopPropagation(); moveSection('${section.id}', 1)" ${idx === sorted.length - 1 ? 'disabled' : ''}>â–¼</button>
          <button class="section-btn" onclick="event.stopPropagation(); duplicateSection('${section.id}')">ğŸ“‹</button>
        </div>
      </div>
      <div class="section-content ${section.id === 'hero' ? 'open' : ''}" id="content-${section.id}">
        ${getSectionForm(section.id)}
      </div>
    </div>
  `).join('');
}

function getSectionForm(sectionId) {
  const data = projectData[sectionId];
  if (!data) return '';
  
  switch(sectionId) {
    case 'hero':
      return `
        <div class="form-group">
          <label class="form-label">Ù†ÙˆØ¹ Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
          <select class="form-select" onchange="projectData.hero.bgType=this.value">
            <option value="gradient" ${data.bgType==='gradient'?'selected':''}>ØªØ¯Ø±Ø¬ Ù„ÙˆÙ†ÙŠ</option>
            <option value="image" ${data.bgType==='image'?'selected':''}>ØµÙˆØ±Ø©</option>
            <option value="video" ${data.bgType==='video'?'selected':''}>ÙÙŠØ¯ÙŠÙˆ</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
          <div class="file-upload" onclick="document.getElementById('heroBgImage').click()">
            <div class="file-upload-icon">ğŸ–¼ï¸</div>
            <div class="file-upload-text">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø±ÙØ¹</div>
            <input type="file" id="heroBgImage" accept="image/*" onchange="handleImageUpload(event, 'hero', 'bgImage')">
          </div>
          ${data.bgImage ? `<div class="uploaded-preview"><img src="${data.bgImage}" alt=""></div>` : ''}
        </div>
        <div class="form-group">
          <label class="form-label">ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ù„ÙÙŠØ©</label>
          <div class="file-upload" onclick="document.getElementById('heroBgVideo').click()">
            <div class="file-upload-icon">ğŸ¬</div>
            <div class="file-upload-text">Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø®Ù„ÙÙŠØ© (MP4, WebM)</div>
            <input type="file" id="heroBgVideo" accept="video/*" onchange="handleVideoUpload(event, 'hero', 'bgVideo')">
          </div>
          ${data.bgVideo ? `<div class="uploaded-preview"><video src="${data.bgVideo}" controls style="max-width:100%"></video></div>` : ''}
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ù„ÙˆÙ† Ø§Ù„ØªØ±Ø§ÙƒØ¨</label>
            <input type="color" class="color-input" value="${data.overlayColor}" onchange="projectData.hero.overlayColor=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">Ø´ÙØ§ÙÙŠØ© Ø§Ù„ØªØ±Ø§ÙƒØ¨</label>
            <input type="range" class="slider" min="0" max="100" value="${data.overlayOpacity*100}" onchange="projectData.hero.overlayOpacity=this.value/100">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©</label>
          <input type="text" class="form-input" value="${data.brandName}" onchange="projectData.hero.brandName=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
          <input type="text" class="form-input" value="${data.headline}" onchange="projectData.hero.headline=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ</label>
          <textarea class="form-textarea" onchange="projectData.hero.subtitle=this.value">${data.subtitle}</textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ù†Øµ Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
            <input type="text" class="form-input" value="${data.ctaText}" onchange="projectData.hero.ctaText=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">Ø±Ø§Ø¨Ø· Ø§Ù„Ø²Ø±</label>
            <input type="text" class="form-input" value="${data.ctaLink}" onchange="projectData.hero.ctaLink=this.value">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ø²Ø± Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ</label>
            <input type="text" class="form-input" value="${data.ctaSecondary}" onchange="projectData.hero.ctaSecondary=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">Ø±Ø§Ø¨Ø·Ù‡</label>
            <input type="text" class="form-input" value="${data.ctaSecondaryLink}" onchange="projectData.hero.ctaSecondaryLink=this.value">
          </div>
        </div>
      `;
    case 'features':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.features.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea class="form-textarea" onchange="projectData.features.description=this.value">${data.description}</textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©</label>
            <select class="form-select" onchange="projectData.features.columns=parseInt(this.value)">
              <option value="2" ${data.columns===2?'selected':''}>2 Ø£Ø¹Ù…Ø¯Ø©</option>
              <option value="3" ${data.columns===3?'selected':''}>3 Ø£Ø¹Ù…Ø¯Ø©</option>
              <option value="4" ${data.columns===4?'selected':''}>4 Ø£Ø¹Ù…Ø¯Ø©</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ù†Ù…Ø·</label>
            <select class="form-select" onchange="projectData.features.style=this.value">
              <option value="card" ${data.style==='card'?'selected':''}>Ø¨Ø·Ø§Ù‚Ø§Øª</option>
              <option value="minimal" ${data.style==='minimal'?'selected':''}>Ø¨Ø³ÙŠØ·</option>
            </select>
          </div>
        </div>
        <div class="dynamic-list">
          ${data.items.map((item, i) => `
            <div class="dynamic-item">
              <div class="dynamic-item-header">
                <span class="dynamic-item-title">Ù…ÙŠØ²Ø© ${i+1}</span>
                <button class="section-btn" onclick="removeFeatureItem(${i})">âœ•</button>
              </div>
              <div class="form-group">
                <input type="text" class="form-input" placeholder="Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© (Ø¥ÙŠÙ…ÙˆØ¬ÙŠ)" value="${item.icon}" onchange="projectData.features.items[${i}].icon=this.value">
              </div>
              <div class="form-group">
                <input type="text" class="form-input" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" value="${item.title}" onchange="projectData.features.items[${i}].title=this.value">
              </div>
              <div class="form-group">
                <textarea class="form-textarea" placeholder="Ø§Ù„ÙˆØµÙ" onchange="projectData.features.items[${i}].description=this.value">${item.description}</textarea>
              </div>
            </div>
          `).join('')}
          <button class="add-item-btn" onclick="addFeatureItem()">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø©</button>
        </div>
      `;
    case 'video':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.video.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea class="form-textarea" onchange="projectData.video.description=this.value">${data.description}</textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ</label>
          <div class="file-upload" onclick="document.getElementById('videoUpload').click()">
            <div class="file-upload-icon">ğŸ¬</div>
            <div class="file-upload-text">Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ (MP4, WebM)</div>
            <input type="file" id="videoUpload" accept="video/*" onchange="handleVideoUpload(event)">
          </div>
          ${data.videoBase64 ? `<div class="uploaded-preview"><video src="${data.videoBase64}" controls style="max-width:100%"></video></div>` : ''}
        </div>
        <div class="form-group">
          <label class="form-label">Ø£Ùˆ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</label>
          <input type="text" class="form-input" placeholder="https://..." value="${data.videoUrl}" onchange="projectData.video.videoUrl=this.value">
        </div>
      `;
    case 'gallery':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.gallery.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø±ÙØ¹ ØµÙˆØ±</label>
          <div class="file-upload" onclick="document.getElementById('galleryUpload').click()">
            <div class="file-upload-icon">ğŸ–¼ï¸</div>
            <div class="file-upload-text">Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ØµÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø©</div>
            <input type="file" id="galleryUpload" accept="image/*" multiple onchange="handleGalleryUpload(event)">
          </div>
        </div>
        <div class="gallery-grid">
          ${data.images.map((img, i) => `
            <div class="gallery-item">
              <img src="${img}" alt="">
              <button class="gallery-item-remove" onclick="removeGalleryImage(${i})">âœ•</button>
            </div>
          `).join('')}
        </div>
      `;
    case 'testimonials':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.testimonials.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ØªØ®Ø·ÙŠØ·</label>
          <select class="form-select" onchange="projectData.testimonials.layout=this.value">
            <option value="grid" ${data.layout==='grid'?'selected':''}>Ø´Ø¨ÙƒØ©</option>
            <option value="slider" ${data.layout==='slider'?'selected':''}>Ù…Ù†Ø²Ù„Ù‚</option>
          </select>
        </div>
        <div class="dynamic-list">
          ${data.items.map((item, i) => `
            <div class="dynamic-item">
              <div class="dynamic-item-header">
                <span class="dynamic-item-title">Ø±Ø£ÙŠ ${i+1}</span>
                <button class="section-btn" onclick="removeTestimonialItem(${i})">âœ•</button>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ù„Ø§Ø³Ù…" value="${item.name}" onchange="projectData.testimonials.items[${i}].name=this.value">
                </div>
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ù„Ù…Ù†ØµØ¨" value="${item.role}" onchange="projectData.testimonials.items[${i}].role=this.value">
                </div>
              </div>
              <div class="form-group">
                <textarea class="form-textarea" placeholder="Ø§Ù„Ø§Ù‚ØªØ¨Ø§Ø³" onchange="projectData.testimonials.items[${i}].quote=this.value">${item.quote}</textarea>
              </div>
            </div>
          `).join('')}
          <button class="add-item-btn" onclick="addTestimonialItem()">+ Ø¥Ø¶Ø§ÙØ© Ø±Ø£ÙŠ</button>
        </div>
      `;
    case 'pricing':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.pricing.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ</label>
          <input type="text" class="form-input" value="${data.subtitle}" onchange="projectData.pricing.subtitle=this.value">
        </div>
        <div class="dynamic-list">
          ${data.plans.map((plan, i) => `
            <div class="dynamic-item">
              <div class="dynamic-item-header">
                <span class="dynamic-item-title">${plan.name}</span>
                <label style="display:flex;align-items:center;gap:4px;font-size:0.75rem;">
                  <input type="checkbox" ${plan.popular?'checked':''} onchange="projectData.pricing.plans[${i}].popular=this.checked"> Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©
                </label>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø·Ø©" value="${plan.name}" onchange="projectData.pricing.plans[${i}].name=this.value">
                </div>
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ù„Ø³Ø¹Ø±" value="${plan.price}" onchange="projectData.pricing.plans[${i}].price=this.value">
                </div>
              </div>
              <div class="form-group">
                <input type="text" class="form-input" placeholder="Ø§Ù„ÙˆØµÙ" value="${plan.description}" onchange="projectData.pricing.plans[${i}].description=this.value">
              </div>
              <div class="form-group">
                <textarea class="form-textarea" placeholder="Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª (Ø³Ø·Ø± Ù„ÙƒÙ„ Ù…ÙŠØ²Ø©)" onchange="projectData.pricing.plans[${i}].features=this.value.split('\\n').filter(f=>f.trim())">${plan.features.join('\n')}</textarea>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ù†Øµ Ø§Ù„Ø²Ø±" value="${plan.cta}" onchange="projectData.pricing.plans[${i}].cta=this.value">
                </div>
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø²Ø±" value="${plan.ctaLink}" onchange="projectData.pricing.plans[${i}].ctaLink=this.value">
                </div>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    case 'faq':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.faq.title=this.value">
        </div>
        <div class="dynamic-list">
          ${data.items.map((item, i) => `
            <div class="dynamic-item">
              <div class="dynamic-item-header">
                <span class="dynamic-item-title">Ø³Ø¤Ø§Ù„ ${i+1}</span>
                <button class="section-btn" onclick="removeFaqItem(${i})">âœ•</button>
              </div>
              <div class="form-group">
                <input type="text" class="form-input" placeholder="Ø§Ù„Ø³Ø¤Ø§Ù„" value="${item.question}" onchange="projectData.faq.items[${i}].question=this.value">
              </div>
              <div class="form-group">
                <textarea class="form-textarea" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©" onchange="projectData.faq.items[${i}].answer=this.value">${item.answer}</textarea>
              </div>
            </div>
          `).join('')}
          <button class="add-item-btn" onclick="addFaqItem()">+ Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</button>
        </div>
      `;
    case 'about':
      return `
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.about.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea class="form-textarea" onchange="projectData.about.description=this.value">${data.description}</textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ØµÙˆØ±Ø©</label>
          <div class="file-upload" onclick="document.getElementById('aboutImage').click()">
            <div class="file-upload-icon">ğŸ–¼ï¸</div>
            <div class="file-upload-text">Ø±ÙØ¹ ØµÙˆØ±Ø©</div>
            <input type="file" id="aboutImage" accept="image/*" onchange="handleImageUpload(event, 'about', 'image')">
          </div>
          ${data.image ? `<div class="uploaded-preview"><img src="${data.image}" alt=""></div>` : ''}
        </div>
        <div class="dynamic-list">
          ${data.stats.map((stat, i) => `
            <div class="dynamic-item">
              <div class="form-row">
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ù„Ø±Ù‚Ù…" value="${stat.number}" onchange="projectData.about.stats[${i}].number=this.value">
                </div>
                <div class="form-group">
                  <input type="text" class="form-input" placeholder="Ø§Ù„ØªØ³Ù…ÙŠØ©" value="${stat.label}" onchange="projectData.about.stats[${i}].label=this.value">
                </div>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    case 'contact':
      return `
        <div class="form-group">
          <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù…</label>
          <input type="text" class="form-input" value="${data.title}" onchange="projectData.contact.title=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea class="form-textarea" onchange="projectData.contact.description=this.value">${data.description}</textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" class="form-input" value="${data.email}" onchange="projectData.contact.email=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
            <input type="text" class="form-input" value="${data.phone}" onchange="projectData.contact.phone=this.value">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
          <input type="text" class="form-input" value="${data.address}" onchange="projectData.contact.address=this.value">
        </div>
        <div class="form-group">
          <label class="form-label">Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨</label>
          <input type="text" class="form-input" placeholder="+966..." value="${data.whatsapp}" onchange="projectData.contact.whatsapp=this.value">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">ØªÙˆÙŠØªØ±</label>
            <input type="text" class="form-input" value="${data.twitter}" onchange="projectData.contact.twitter=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">Ø§Ù†Ø³ØªØºØ±Ø§Ù…</label>
            <input type="text" class="form-input" value="${data.instagram}" onchange="projectData.contact.instagram=this.value">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">ÙŠÙˆØªÙŠÙˆØ¨</label>
            <input type="text" class="form-input" value="${data.youtube}" onchange="projectData.contact.youtube=this.value">
          </div>
          <div class="form-group">
            <label class="form-label">ØªÙŠÙƒ ØªÙˆÙƒ</label>
            <input type="text" class="form-input" value="${data.tiktok}" onchange="projectData.contact.tiktok=this.value">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Ø±Ø§Ø¨Ø· Ø®Ø±ÙŠØ·Ø© Ø¬ÙˆØ¬Ù„ (Embed)</label>
          <textarea class="form-textarea" placeholder="https://www.google.com/maps/embed?pb=..." onchange="projectData.contact.mapUrl=this.value">${data.mapUrl}</textarea>
          <small style="display:block;margin-top:8px;opacity:0.7;">Ø§Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ù† Google Maps â†’ Ù…Ø´Ø§Ø±ÙƒØ© â†’ Ù†Ø³Ø® HTML</small>
        </div>
      `;
    case 'footer':
      return `
        <div class="form-group">
          <label class="form-label">Ø§Ù„Ø´Ø¹Ø§Ø±</label>
          <div class="file-upload" onclick="document.getElementById('footerLogo').click()">
            <div class="file-upload-icon">ğŸ–¼ï¸</div>
            <div class="file-upload-text">Ø±ÙØ¹ Ø§Ù„Ø´Ø¹Ø§Ø±</div>
            <input type="file" id="footerLogo" accept="image/*" onchange="handleImageUpload(event, 'footer', 'logo')">
          </div>
          ${data.logo ? `<div class="uploaded-preview"><img src="${data.logo}" alt="" style="max-height:60px"></div>` : ''}
        </div>
        <div class="form-group">
          <label class="form-label">Ø§Ù„ÙˆØµÙ</label>
          <textarea class="form-textarea" onchange="projectData.footer.description=this.value">${data.description}</textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø±</label>
          <input type="text" class="form-input" value="${data.copyright}" onchange="projectData.footer.copyright=this.value">
        </div>
      `;
    default:
      return '';
  }
}

function toggleSection(id) {
  const section = projectData.sections.find(s => s.id === id);
  if (section) {
    section.enabled = !section.enabled;
    renderSections();
    saveState();
  }
}

function toggleSectionContent(id) {
  const content = document.getElementById('content-' + id);
  if (content) {
    content.classList.toggle('open');
  }
}

function moveSection(id, direction) {
  const sorted = [...projectData.sections].sort((a, b) => a.order - b.order);
  const idx = sorted.findIndex(s => s.id === id);
  if ((direction === -1 && idx > 0) || (direction === 1 && idx < sorted.length - 1)) {
    const swapIdx = idx + direction;
    const temp = sorted[idx].order;
    sorted[idx].order = sorted[swapIdx].order;
    sorted[swapIdx].order = temp;
    renderSections();
    saveState();
  }
}

function duplicateSection(id) {
  showNotification('ØªÙ… Ù†Ø³Ø® Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚Ø³Ù…');
}

function addFeatureItem() {
  projectData.features.items.push({ icon: 'â­', title: 'Ù…ÙŠØ²Ø© Ø¬Ø¯ÙŠØ¯Ø©', description: 'ÙˆØµÙ Ø§Ù„Ù…ÙŠØ²Ø©' });
  renderSections();
  document.getElementById('content-features').classList.add('open');
}

function removeFeatureItem(idx) {
  projectData.features.items.splice(idx, 1);
  renderSections();
  document.getElementById('content-features').classList.add('open');
}

function addTestimonialItem() {
  projectData.testimonials.items.push({ name: 'Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„', role: 'Ø§Ù„Ù…Ù†ØµØ¨', quote: 'Ø±Ø£ÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‡Ù†Ø§', avatar: '' });
  renderSections();
  document.getElementById('content-testimonials').classList.add('open');
}

function removeTestimonialItem(idx) {
  projectData.testimonials.items.splice(idx, 1);
  renderSections();
  document.getElementById('content-testimonials').classList.add('open');
}

function addFaqItem() {
  projectData.faq.items.push({ question: 'Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ØŸ', answer: 'Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§' });
  renderSections();
  document.getElementById('content-faq').classList.add('open');
}

function removeFaqItem(idx) {
  projectData.faq.items.splice(idx, 1);
  renderSections();
  document.getElementById('content-faq').classList.add('open');
}

function handleImageUpload(event, section, field) {
  const file = event.target.files[0];
  if (!file) return;
  try {
    const reader = new FileReader();
    reader.onerror = () => showNotification('Ø®Ø·Ø£: ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©');
    reader.onload = function(e) {
      projectData[section][field] = e.target.result;
      saveState();
      renderSections();
      updatePreview();
      setTimeout(() => document.getElementById('content-' + section)?.classList.add('open'), 50);
      showNotification('ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ“');
      event.target.value = '';
    };
    reader.readAsDataURL(file);
  } catch (err) {
    console.error('Upload error:', err);
    showNotification('Ø®Ø·Ø£: ÙØ´Ù„ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù');
  }
}

function handleVideoUpload(event, section, field) {
  const file = event.target.files[0];
  if (!file) return;
  showNotification('Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...');
  try {
    const reader = new FileReader();
    reader.onerror = () => showNotification('Ø®Ø·Ø£: ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
    reader.onload = function(e) {
      if (section && field) {
        projectData[section][field] = e.target.result;
      } else {
        projectData.video.videoBase64 = e.target.result;
      }
      saveState();
      renderSections();
      updatePreview();
      if (section) setTimeout(() => document.getElementById('content-' + section)?.classList.add('open'), 50);
      showNotification('ØªÙ… Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­ âœ“');
      event.target.value = '';
    };
    reader.readAsDataURL(file);
  } catch (err) {
    console.error('Video error:', err);
    showNotification('Ø®Ø·Ø£: ÙØ´Ù„ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù');
  }
}

function handleGalleryUpload(event) {
  const files = event.target.files;
  if (!files || files.length === 0) return;
  let loaded = 0;
  const errors = [];
  for (let file of files) {
    try {
      const reader = new FileReader();
      reader.onerror = () => errors.push(file.name);
      reader.onload = function(e) {
        projectData.gallery.images.push(e.target.result);
        loaded++;
        if (loaded === files.length) {
          saveState();
          renderSections();
          updatePreview();
          setTimeout(() => document.getElementById('content-gallery')?.classList.add('open'), 50);
          const msg = errors.length > 0 ? `ØªÙ… Ø±ÙØ¹ ${loaded} ØµÙˆØ±Ø© (${errors.length} ÙØ´Ù„Øª)` : `ØªÙ… Ø±ÙØ¹ ${files.length} ØµÙˆØ±Ø© âœ“`;
          showNotification(msg);
          event.target.value = '';
        }
      };
      reader.readAsDataURL(file);
    } catch (err) { loaded++; errors.push(file.name); }
  }
}

function removeGalleryImage(idx) {
  projectData.gallery.images.splice(idx, 1);
  renderSections();
  document.getElementById('content-gallery').classList.add('open');
}

function updateDesign() {
  projectData.design.font = document.getElementById('fontFamily').value;
  projectData.design.primaryColor = document.getElementById('primaryColor').value;
  projectData.design.bgColor = document.getElementById('bgColor').value;
  projectData.design.textColor = document.getElementById('textColor').value;
  projectData.design.padding = parseInt(document.getElementById('paddingSlider').value);
  projectData.design.maxWidth = document.getElementById('maxWidth').value;
  document.getElementById('paddingValue').textContent = projectData.design.padding + 'px';
  document.getElementById('primaryColorText').value = projectData.design.primaryColor;
  document.getElementById('bgColorText').value = projectData.design.bgColor;
  document.getElementById('textColorText').value = projectData.design.textColor;
}

function syncColor(type) {
  if (type === 'primary') {
    document.getElementById('primaryColor').value = document.getElementById('primaryColorText').value;
  } else if (type === 'bg') {
    document.getElementById('bgColor').value = document.getElementById('bgColorText').value;
  } else if (type === 'text') {
    document.getElementById('textColor').value = document.getElementById('textColorText').value;
  }
  updateDesign();
}

function updateDesignInputs() {
  document.getElementById('fontFamily').value = projectData.design.font;
  document.getElementById('primaryColor').value = projectData.design.primaryColor;
  document.getElementById('primaryColorText').value = projectData.design.primaryColor;
  document.getElementById('bgColor').value = projectData.design.bgColor;
  document.getElementById('bgColorText').value = projectData.design.bgColor;
  document.getElementById('textColor').value = projectData.design.textColor;
  document.getElementById('textColorText').value = projectData.design.textColor;
  document.getElementById('paddingSlider').value = projectData.design.padding;
  document.getElementById('paddingValue').textContent = projectData.design.padding + 'px';
  document.getElementById('maxWidth').value = projectData.design.maxWidth;
}

function generateHTML() {
  const d = projectData.design;
  const sorted = [...projectData.sections].filter(s => s.enabled).sort((a, b) => a.order - b.order);
  
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª CSS Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†
  const safeVars = {
    primary: d.primaryColor,
    bg: d.bgColor,
    text: d.textColor,
    border: d.textColor + '22'
  };
  
  let sectionsHTML = '';
  sorted.forEach(section => {
    sectionsHTML += generateSectionHTML(section.id);
  });
  
  // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©ØŒ Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ navbar Ù…Ø¹ sidebar
  const navbarHTML = projectData.pageMode === 'multi' ? `<nav style="position:sticky;top:0;z-index:100;background:${d.bgColor};border-bottom:1px solid ${d.textColor}22;padding:16px 20px;display:flex;justify-content:space-between;align-items:center;"><div style="font-weight:700;font-size:1.25rem;color:${d.primaryColor};">${projectData.hero.brandName}</div><button id="menuBtn" style="background:none;border:none;font-size:1.5rem;cursor:pointer;color:${d.textColor};padding:8px;border-radius:8px;transition:background 0.3s;" onclick="toggleSidebar()">â˜°</button></nav><aside id="sidebar" style="position:fixed;top:0;right:-280px;width:280px;height:100vh;background:${d.bgColor};border-left:1px solid ${d.textColor}22;padding:20px;transition:right 0.3s ease;z-index:200;overflow-y:auto;"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;"><h3 style="color:${d.textColor};margin:0;">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3><button onclick="toggleSidebar()" style="background:none;border:none;font-size:1.5rem;cursor:pointer;color:${d.textColor};">âœ•</button></div><div style="display:flex;flex-direction:column;gap:12px;"><a href="#home" onclick="toggleSidebar()" style="padding:12px 16px;background:${d.primaryColor}33;border-radius:8px;color:${d.textColor};text-decoration:none;font-weight:500;transition:background 0.3s;">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><a href="#features" onclick="toggleSidebar()" style="padding:12px 16px;background:transparent;border-radius:8px;color:${d.textColor};text-decoration:none;font-weight:500;transition:background 0.3s;">âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</a><a href="#pricing" onclick="toggleSidebar()" style="padding:12px 16px;background:transparent;border-radius:8px;color:${d.textColor};text-decoration:none;font-weight:500;transition:background 0.3s;">ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</a><a href="#contact" onclick="toggleSidebar()" style="padding:12px 16px;background:transparent;border-radius:8px;color:${d.textColor};text-decoration:none;font-weight:500;transition:background 0.3s;">ğŸ“§ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></div></aside>` : '';

  return `<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${projectData.hero.brandName}</title>
<!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© AOS Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± (Scroll Reveal) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
<!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Animate.css Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†Ø§Øª Ø§Ù„Ø³Ù„Ø³Ø© -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: ${d.font};
  background: ${d.bgColor};
  color: ${d.textColor};
  line-height: 1.7;
}
.container { max-width: ${d.maxWidth}; margin: 0 auto; padding: 0 20px; }
section { padding: ${d.padding}px 0; }
.btn {
  display: inline-block;
  padding: 14px 32px;
  background: ${d.primaryColor};
  color: white;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  transition: transform 0.2s, box-shadow 0.2s;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.btn-secondary {
  background: transparent;
  border: 2px solid ${d.primaryColor};
  color: ${d.primaryColor};
}
h1, h2, h3, h4 { line-height: 1.3; }
.hero {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
  ${projectData.hero.bgType === 'image' && projectData.hero.bgImage ? `background-image: url('${projectData.hero.bgImage}'); background-size: cover; background-position: center;` : ''}
  ${projectData.hero.bgType === 'gradient' ? `background: linear-gradient(135deg, ${d.primaryColor}22, ${d.bgColor});` : ''}
}
.hero video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
}
.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: ${projectData.hero.overlayColor};
  opacity: ${projectData.hero.overlayOpacity};
  z-index: 1;
}
.hero-content { position: relative; z-index: 1; max-width: 800px; padding: 40px 20px; }
.hero-brand { font-size: 1rem; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 20px; opacity: 0.8; }
.hero h1 { font-size: clamp(2.5rem, 6vw, 4rem); margin-bottom: 20px; }
.hero p { font-size: 1.25rem; opacity: 0.9; margin-bottom: 40px; }
.hero-buttons { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
.section-title { text-align: center; margin-bottom: 50px; }
.section-title h2 { font-size: 2.5rem; margin-bottom: 16px; }
.section-title p { opacity: 0.7; font-size: 1.1rem; }
.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 30px;
}
.feature-card {
  background: ${d.bgColor}cc;
  border: 1px solid ${d.textColor}22;
  border-radius: 16px;
  padding: 30px;
  text-align: center;
  transition: transform 0.3s;
}
.feature-card:hover { transform: translateY(-5px); }
.feature-icon { font-size: 3rem; margin-bottom: 20px; }
.feature-card h3 { margin-bottom: 12px; }
.feature-card p { opacity: 0.7; }
.video-section { text-align: center; }
.video-wrapper {
  max-width: 900px;
  margin: 0 auto;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}
.video-wrapper video, .video-wrapper iframe { width: 100%; aspect-ratio: 16/9; border: none; }
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
}
.gallery-item {
  border-radius: 12px;
  overflow: hidden;
  aspect-ratio: 1;
  cursor: pointer;
}
.gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
.gallery-item:hover img { transform: scale(1.05); }
.testimonials-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
}
.testimonial-card {
  background: ${d.textColor}11;
  border-radius: 16px;
  padding: 30px;
}
.testimonial-quote { font-size: 1.1rem; margin-bottom: 20px; font-style: italic; }
.testimonial-author { display: flex; align-items: center; gap: 12px; }
.testimonial-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: ${d.primaryColor};
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}
.testimonial-info h4 { margin-bottom: 4px; }
.testimonial-info span { opacity: 0.6; font-size: 0.9rem; }
.pricing-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 30px;
  max-width: 1000px;
  margin: 0 auto;
}
.pricing-card {
  background: ${d.textColor}11;
  border: 2px solid transparent;
  border-radius: 20px;
  padding: 40px 30px;
  text-align: center;
  position: relative;
  transition: transform 0.3s;
}
.pricing-card:hover { transform: translateY(-5px); }
.pricing-card.popular { border-color: ${d.primaryColor}; }
.popular-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: ${d.primaryColor};
  color: white;
  padding: 6px 20px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}
.pricing-name { font-size: 1.5rem; margin-bottom: 8px; }
.pricing-price { font-size: 3rem; font-weight: 700; margin-bottom: 8px; }
.pricing-price span { font-size: 1rem; opacity: 0.6; }
.pricing-desc { opacity: 0.6; margin-bottom: 30px; }
.pricing-features { list-style: none; margin-bottom: 30px; text-align: right; }
.pricing-features li { padding: 10px 0; border-bottom: 1px solid ${d.textColor}22; }
.pricing-features li::before { content: 'âœ“'; color: ${d.primaryColor}; margin-left: 10px; }
.faq-list { max-width: 800px; margin: 0 auto; }
.faq-item { border-bottom: 1px solid ${d.textColor}22; }
.faq-question {
  padding: 20px 0;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  font-size: 1.1rem;
}
.faq-question::after { content: '+'; font-size: 1.5rem; transition: transform 0.3s; }
.faq-item.open .faq-question::after { transform: rotate(45deg); }
.faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s; }
.faq-item.open .faq-answer { max-height: 500px; }
.faq-answer p { padding-bottom: 20px; opacity: 0.8; }
.about-content { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; }
@media (max-width: 768px) { .about-content { grid-template-columns: 1fr; } }
.about-image { border-radius: 16px; overflow: hidden; }
.about-image img { width: 100%; }
.about-stats { display: flex; gap: 40px; margin-top: 30px; }
.stat { text-align: center; }
.stat-number { font-size: 2.5rem; font-weight: 700; color: ${d.primaryColor}; }
.stat-label { opacity: 0.7; }
.contact-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; }
@media (max-width: 768px) { .contact-grid { grid-template-columns: 1fr; } }
.contact-info { display: flex; flex-direction: column; gap: 20px; }
.contact-item { display: flex; align-items: center; gap: 12px; }
.contact-icon { font-size: 1.5rem; }
.social-links { display: flex; gap: 16px; margin-top: 20px; }
.social-link {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: ${d.textColor}11;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  font-size: 1.2rem;
  transition: background 0.3s;
}
.social-link:hover { background: ${d.primaryColor}; }
.contact-form { display: flex; flex-direction: column; gap: 16px; }
.contact-form input, .contact-form textarea {
  padding: 14px 18px;
  border: 1px solid ${d.textColor}33;
  border-radius: 8px;
  background: transparent;
  color: ${d.textColor};
  font-family: inherit;
  font-size: 1rem;
}
.contact-form textarea { min-height: 120px; resize: vertical; }
.contact-form button {
  padding: 14px 32px;
  background: ${d.primaryColor};
  color: white;
  border: none;
  border-radius: 8px;
  font-family: inherit;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
}
.map-wrapper { margin-top: 30px; border-radius: 16px; overflow: hidden; }
.map-wrapper iframe { width: 100%; height: 300px; border: none; }
footer {
  background: ${d.textColor}08;
  padding: 60px 0 30px;
  text-align: center;
}
.footer-logo { font-size: 1.5rem; font-weight: 700; margin-bottom: 16px; }
.footer-logo img { max-height: 50px; }
.footer-desc { opacity: 0.7; margin-bottom: 20px; max-width: 400px; margin-left: auto; margin-right: auto; }
.footer-copyright { opacity: 0.5; font-size: 0.9rem; margin-top: 30px; padding-top: 30px; border-top: 1px solid ${d.textColor}22; }
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}
.lightbox.open { display: flex; }
.lightbox img { max-width: 100%; max-height: 90vh; border-radius: 8px; }
.lightbox-close {
  position: absolute;
  top: 20px;
  left: 20px;
  width: 44px;
  height: 44px;
  background: white;
  border: none;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Scroll Reveal) ====== */
/* Ø§Ù„Ù…Ù‚Ø§Ø·Ø¹ Ø³ØªØ¸Ù‡Ø± ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± - Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø³Ø±Ø¹Ø© Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†ØŒ ØºÙŠÙ‘Ø± delay Ø£Ùˆ duration */
section {
  opacity: 0;
  animation: fadeInUp 0.8s ease-out forwards;
}
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (Card Reveal) ====== */
/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø³ØªØ¸Ù‡Ø± Ø¨Ø­Ø±ÙƒØ© Ø³Ù„Ø³Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
.feature-card, .testimonial-card, .pricing-card, .gallery-item {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}
.feature-card:hover, .testimonial-card:hover, .pricing-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø²Ø± (Button Hover) ====== */
.btn {
  position: relative;
  overflow: hidden;
}
.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.2);
  transition: left 0.3s ease;
}
.btn:hover::before {
  left: 100%;
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø´Ø¨ÙƒØ© (Stagger Effect) ====== */
.features-grid > div, .testimonials-grid > div, .pricing-grid > div {
  animation: none;
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Title Animation) ====== */
.section-title h2 {
  animation: slideInDown 0.8s ease-out;
}
@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Accordion Animation) ====== */
.faq-item {
  border-bottom: 1px solid ${d.textColor}22;
  transition: all 0.3s ease;
}
.faq-item.open {
  background: ${d.textColor}08;
  padding: 16px;
  border-radius: 8px;
}
</style>
</head>
<body>
${navbarHTML}
${sectionsHTML}
<div class="lightbox" id="lightbox" onclick="this.classList.remove('open')">
  <button class="lightbox-close" onclick="document.getElementById('lightbox').classList.remove('open')">âœ•</button>
  <img id="lightbox-img" src="" alt="">
</div>
<script>
/* ====== ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© AOS (Animate On Scroll) ====== */
/* Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙŠÙØ¹Ù‘Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†Ø§Øª Ø§Ù„ØªÙŠ ØªØ¶ÙÙŠÙ‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
const script = document.createElement('script');
script.src = 'https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js';
script.onload = function() {
  AOS.init({
    duration: 800,           // Ù…Ø¯Ø© Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø³ÙƒÙ†Ø¯
    easing: 'ease-in-out',  // Ù†ÙˆØ¹ Ø§Ù„ØªØ®ÙÙŠÙ (ease, linear, ease-in, ease-out, ease-in-out)
    once: false,            // Ø§Ø¬Ø¹Ù„Ù‡Ø§ true Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ÙŠØ¯ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·
    mirror: true,           // Ø§Ø¬Ø¹Ù„Ù‡Ø§ false Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø¹Ù„Ù‰
    offset: 200             // Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ø§Ù„Ø¨ÙƒØ³Ù„ Ù‚Ø¨Ù„ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
  });
};
document.head.appendChild(script);

/* ====== Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© (FAQ Accordion) ====== */
/* Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ØŒ ÙŠØªÙ… ÙØªØ­/ØºÙ„Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø³Ù„Ø³ */
document.querySelectorAll('.faq-item').forEach(item => {
  item.querySelector('.faq-question').addEventListener('click', () => {
    item.classList.toggle('open');
    // ØºÙŠÙ‘Ø± max-height ÙÙŠ CSS Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø£Ø·ÙˆÙ„ Ù…Ù† 500px
  });
});

/* ====== Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± (Gallery Lightbox) ====== */
/* Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠ ØµÙˆØ±Ø© ÙŠÙØªØ­Ù‡Ø§ ÙÙŠ lightbox Ø¨Ø£Ù†ÙŠÙ…ÙŠØ´Ù† zoom */
document.querySelectorAll('.gallery-item').forEach(item => {
  item.addEventListener('click', () => {
    const lightbox = document.getElementById('lightbox');
    document.getElementById('lightbox-img').src = item.querySelector('img').src;
    lightbox.classList.add('open');
    // Ø¥Ø¶Ø§ÙØ© animation class Ù„Ù„ØµÙˆØ±Ø©
    document.getElementById('lightbox-img').style.animation = 'none';
    setTimeout(() => {
      document.getElementById('lightbox-img').style.animation = 'zoomIn 0.3s ease';
    }, 10);
  });
});

/* ====== Ù…Ø¹Ø§Ù„Ø¬ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ§ØµÙ„ ====== */
function handleContactForm(event) {
  const form = event.target;
  const formData = new FormData(form);
  // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø³ÙŠØ±ÙØ± Ø£Ùˆ API
  // Ù…Ø«Ø§Ù„: fetch('/api/contact', { method: 'POST', body: formData })
  console.log('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', formData);
  alert('Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
  form.reset();
}
<\/script>
</body>
</html>`;
}

function generateSectionHTML(id) {
  const d = projectData.design;
  switch(id) {
    case 'hero':
      const h = projectData.hero;
      return `
<section class="hero">
  ${h.bgType === 'video' && h.bgVideo ? `<video autoplay muted loop><source src="${h.bgVideo}"></video>` : ''}
  <div class="hero-content">
    <div class="hero-brand">${h.brandName}</div>
    <h1>${h.headline}</h1>
    <p>${h.subtitle}</p>
    <div class="hero-buttons">
      <a href="${h.ctaLink}" class="btn">${h.ctaText}</a>
      ${h.ctaSecondary ? `<a href="${h.ctaSecondaryLink}" class="btn btn-secondary">${h.ctaSecondary}</a>` : ''}
    </div>
  </div>
</section>`;
    case 'features':
      const f = projectData.features;
      return `
<section class="features">
  <div class="container">
    <div class="section-title">
      <h2>${f.title}</h2>
      <p>${f.description}</p>
    </div>
    <div class="features-grid" style="grid-template-columns: repeat(${f.columns}, 1fr);">
      <!-- ØªÙ… Ø¥Ø¶Ø§ÙØ© data-aos Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ scroll reveal animation Ù„ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø© -->
      <!-- ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± animation type: fade-up, fade-down, flip-left, zoom-in, etc -->
      ${f.items.map((item, idx) => `
      <div class="feature-card" data-aos="fade-up" data-aos-delay="${idx * 100}" data-aos-duration="800">
        <div class="feature-icon">${item.icon}</div>
        <h3>${item.title}</h3>
        <p>${item.description}</p>
      </div>`).join('')}
    </div>
  </div>
</section>`;
    case 'video':
      const v = projectData.video;
      const videoSrc = v.videoBase64 || v.videoUrl;
      if (!videoSrc) return '';
      return `
<section class="video-section">
  <div class="container">
    <div class="section-title">
      <h2>${v.title}</h2>
      <p>${v.description}</p>
    </div>
    <div class="video-wrapper">
      ${v.videoBase64 ? `<video controls><source src="${v.videoBase64}"></video>` : `<iframe src="${v.videoUrl}" allowfullscreen></iframe>`}
    </div>
  </div>
</section>`;
    case 'gallery':
      const g = projectData.gallery;
      if (!g.images.length) return '';
      return `
<section class="gallery">
  <div class="container">
    <div class="section-title">
      <h2>${g.title}</h2>
    </div>
    <div class="gallery-grid">
      <!-- ØµÙˆØ± Ø§Ù„Ù…Ø¹Ø±Ø¶ ØªØ¸Ù‡Ø± Ø¨Ø£Ù†ÙŠÙ…ÙŠØ´Ù† fade-in Ù…Ø¹ ØªØ£Ø«ÙŠØ± zoom Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± -->
      <!-- ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥Ù„Ù‰ rotate-in Ø£Ùˆ slide-up Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª -->
      ${g.images.map((img, idx) => `<div class="gallery-item" data-aos="fade-in" data-aos-delay="${idx * 80}" data-aos-duration="700"><img src="${img}" alt=""></div>`).join('')}
    </div>
  </div>
</section>`;
    case 'testimonials':
      const t = projectData.testimonials;
      return `
<section class="testimonials">
  <div class="container">
    <div class="section-title">
      <h2>${t.title}</h2>
    </div>
    <div class="testimonials-grid">
      <!-- ØªÙ… Ø¥Ø¶Ø§ÙØ© animation attributes - ÙƒÙ„ testimonial ÙŠØ¸Ù‡Ø± Ø¨ØªØ£Ø®ÙŠØ± Ù…Ø®ØªÙ„Ù (stagger effect) -->
      <!-- ØºÙŠÙ‘Ø± data-aos-duration Ù„ØªØ³Ø±ÙŠØ¹ Ø£Ùˆ ØªØ¨Ø·ÙŠØ¡ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† (Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø³ÙƒÙ†Ø¯) -->
      ${t.items.map((item, idx) => `
      <div class="testimonial-card" data-aos="flip-left" data-aos-delay="${idx * 150}" data-aos-duration="900">
        <p class="testimonial-quote">"${item.quote}"</p>
        <div class="testimonial-author">
          <div class="testimonial-avatar">${item.avatar ? `<img src="${item.avatar}" style="width:100%;height:100%;object-fit:cover;border-radius:50%">` : item.name.charAt(0)}</div>
          <div class="testimonial-info">
            <h4>${item.name}</h4>
            <span>${item.role}</span>
          </div>
        </div>
      </div>`).join('')}
    </div>
  </div>
</section>`;
    case 'pricing':
      const p = projectData.pricing;
      return `
<section class="pricing">
  <div class="container">
    <div class="section-title">
      <h2>${p.title}</h2>
      <p>${p.subtitle}</p>
    </div>
    <div class="pricing-grid">
      <!-- ÙƒÙ„ Ø¨Ø·Ø§Ù‚Ø© ØªØ³Ø¹ÙŠØ± ØªØ¸Ù‡Ø± Ø¨Ø£Ù†ÙŠÙ…ÙŠØ´Ù† zoom-in Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ù…ØªØ¯Ø±Ø¬ -->
      <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© "Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©" ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ÙˆØ³Ø· Ø¨Ø£ÙˆÙ„ÙˆÙŠØ© -->
      ${p.plans.map((plan, idx) => `
      <div class="pricing-card ${plan.popular ? 'popular' : ''}" data-aos="zoom-in" data-aos-delay="${plan.popular ? 0 : (idx * 120)}" data-aos-duration="850">
        ${plan.popular ? '<div class="popular-badge">Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ©</div>' : ''}
        <h3 class="pricing-name">${plan.name}</h3>
        <div class="pricing-price">${plan.price}<span> Ø±.Ø³/Ø´Ù‡Ø±</span></div>
        <p class="pricing-desc">${plan.description}</p>
        <ul class="pricing-features">
          ${plan.features.map(f => `<li>${f}</li>`).join('')}
        </ul>
        <a href="${plan.ctaLink}" class="btn" style="width:100%">${plan.cta}</a>
      </div>`).join('')}
    </div>
  </div>
</section>`;
    case 'faq':
      const faq = projectData.faq;
      return `
<section class="faq">
  <div class="container">
    <div class="section-title">
      <h2>${faq.title}</h2>
    </div>
    <div class="faq-list">
      ${faq.items.map(item => `
      <div class="faq-item">
        <div class="faq-question">${item.question}</div>
        <div class="faq-answer"><p>${item.answer}</p></div>
      </div>`).join('')}
    </div>
  </div>
</section>`;
    case 'about':
      const a = projectData.about;
      return `
<section class="about">
  <div class="container">
    <div class="about-content">
      <div class="about-text">
        <h2>${a.title}</h2>
        <p style="margin:20px 0;opacity:0.8">${a.description}</p>
        <div class="about-stats">
          ${a.stats.map(s => `<div class="stat"><div class="stat-number">${s.number}</div><div class="stat-label">${s.label}</div></div>`).join('')}
        </div>
      </div>
      ${a.image ? `<div class="about-image"><img src="${a.image}" alt=""></div>` : ''}
    </div>
  </div>
</section>`;
    case 'contact':
      const c = projectData.contact;
      return `
<section class="contact" data-aos="fade-up" data-aos-duration="800">
  <div class="container">
    <div class="section-title">
      <h2>${c.title}</h2>
      <p>${c.description}</p>
    </div>
    <div class="contact-grid">
      <div class="contact-info">
        <div class="contact-intro">
          ${c.email ? `<div class="contact-item">
            <span class="contact-icon">ğŸ“§</span>
            <div>
              <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</strong>
              <p>${c.email}</p>
            </div>
          </div>` : ''}
          ${c.phone ? `<div class="contact-item">
            <span class="contact-icon">ğŸ“</span>
            <div>
              <strong>Ø§Ù„Ù‡Ø§ØªÙ</strong>
              <p>${c.phone}</p>
            </div>
          </div>` : ''}
          ${c.address ? `<div class="contact-item">
            <span class="contact-icon">ğŸ“</span>
            <div>
              <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</strong>
              <p>${c.address}</p>
            </div>
          </div>` : ''}
        </div>
        <div class="social-links" style="margin-top:30px;justify-content:flex-start;">
          ${c.twitter ? `<a href="${c.twitter}" class="social-link" title="ØªÙˆÙŠØªØ±">ğ•</a>` : ''}
          ${c.instagram ? `<a href="${c.instagram}" class="social-link" title="Ø§Ù†Ø³ØªØºØ±Ø§Ù…">ğŸ“·</a>` : ''}
          ${c.youtube ? `<a href="${c.youtube}" class="social-link" title="ÙŠÙˆØªÙŠÙˆØ¨">â–¶</a>` : ''}
          ${c.tiktok ? `<a href="${c.tiktok}" class="social-link" title="ØªÙŠÙƒ ØªÙˆÙƒ">â™ª</a>` : ''}
          ${c.whatsapp ? `<a href="https://wa.me/${c.whatsapp.replace(/\D/g,'')}" class="social-link" title="ÙˆØ§ØªØ³Ø§Ø¨">ğŸ’¬</a>` : ''}
        </div>
        ${c.mapUrl ? `<div class="map-wrapper" style="margin-top:30px;"><iframe src="${c.mapUrl}" style="width:100%;height:350px;border:none;border-radius:12px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div>` : ''}
      </div>
      <div class="contact-form">
        <h3 style="margin-bottom:20px;">Ø£Ø±Ø³Ù„ Ù„Ù†Ø§ Ø±Ø³Ø§Ù„Ø©</h3>
        <form onsubmit="event.preventDefault(); handleContactForm(event)">
          <div class="form-group" style="margin-bottom:16px;">
            <input type="text" placeholder="Ø§Ø³Ù…Ùƒ" required style="width:100%;padding:12px 16px;border:1px solid ${d.textColor}33;border-radius:8px;background:${d.bgColor};color:${d.textColor};font-family:inherit;">
          </div>
          <div class="form-group" style="margin-bottom:16px;">
            <input type="email" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required style="width:100%;padding:12px 16px;border:1px solid ${d.textColor}33;border-radius:8px;background:${d.bgColor};color:${d.textColor};font-family:inherit;">
          </div>
          <div class="form-group" style="margin-bottom:16px;">
            <input type="text" placeholder="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹" required style="width:100%;padding:12px 16px;border:1px solid ${d.textColor}33;border-radius:8px;background:${d.bgColor};color:${d.textColor};font-family:inherit;">
          </div>
          <div class="form-group" style="margin-bottom:20px;">
            <textarea placeholder="Ø±Ø³Ø§Ù„ØªÙƒ" required style="width:100%;padding:12px 16px;min-height:120px;border:1px solid ${d.textColor}33;border-radius:8px;background:${d.bgColor};color:${d.textColor};font-family:inherit;resize:vertical;"></textarea>
          </div>
          <button type="submit" style="width:100%;padding:14px 32px;background:${d.primaryColor};color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s;font-family:inherit;">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        </form>
      </div>
    </div>
  </div>
</section>`;
    case 'footer':
      const ft = projectData.footer;
      return `
<footer>
  <div class="container">
    <div class="footer-logo">${ft.logo ? `<img src="${ft.logo}" alt="">` : projectData.hero.brandName}</div>
    <p class="footer-desc">${ft.description}</p>
    <div class="social-links" style="justify-content:center">
      ${projectData.contact.twitter ? `<a href="${projectData.contact.twitter}" class="social-link">ğ•</a>` : ''}
      ${projectData.contact.instagram ? `<a href="${projectData.contact.instagram}" class="social-link">ğŸ“·</a>` : ''}
      ${projectData.contact.youtube ? `<a href="${projectData.contact.youtube}" class="social-link">â–¶</a>` : ''}
    </div>
    <p class="footer-copyright">${ft.copyright}</p>
  </div>
</footer>`;
    default:
      return '';
  }
}

function updatePreview() {
  const html = generateHTML();
  document.getElementById('previewContent').innerHTML = `<iframe srcdoc="${html.replace(/"/g, '&quot;')}" style="width:100%;height:100%;min-height:800px;border:none;"></iframe>`;
  document.getElementById('codeOutput').textContent = html;
}

function applyChanges() {
  saveState();
  updatePreview();
  showNotification('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª');
}

function downloadHTML() {
  const html = generateHTML();
  const blob = new Blob([html], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'landing-page.html';
  a.click();
  URL.revokeObjectURL(url);
  showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
}

function copyCode() {
  const html = generateHTML();
  navigator.clipboard.writeText(html);
  showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯');
}

function exportJSON() {
  const json = JSON.stringify(projectData, null, 2);
  const blob = new Blob([json], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'landing-page-project.json';
  a.click();
  URL.revokeObjectURL(url);
  showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹');
}

function importJSON(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      try {
        projectData = JSON.parse(e.target.result);
        renderSections();
        updateDesignInputs();
        updatePreview();
        saveState();
        showNotification('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹');
      } catch(err) {
        showNotification('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ù„Ù');
      }
    };
    reader.readAsText(file);
  }
}

function setDevice(device) {
  document.querySelectorAll('.device-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  const frame = document.getElementById('previewFrame');
  frame.classList.remove('tablet', 'mobile');
  if (device !== 'desktop') frame.classList.add(device);
}

function toggleTheme() {
  isDarkMode = !isDarkMode;
  document.body.classList.toggle('light-mode', !isDarkMode);
  document.getElementById('themeToggle').textContent = isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸';
}

function resetProject() {
  if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ')) {
    localStorage.removeItem('landingPageBuilder');
    location.reload();
  }
}

function loadTemplate(template) {
  const templates = {
    saas: {
      hero: {
        bgType: 'gradient',
        bgImage: '',
        bgVideo: '',
        overlayColor: '#000000',
        overlayOpacity: 0.3,
        brandName: 'CloudFlow',
        headline: 'Ø£ØªÙ…ØªØ© Ø£Ø¹Ù…Ø§Ù„Ùƒ Ø¨Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù…',
        subtitle: 'Ù…Ù†ØµØ© Ø³Ø­Ø§Ø¨ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„ÙØ±Ù‚ Ø¨ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØªÙƒÙ„ÙØ© Ù…Ù†Ø®ÙØ¶Ø©',
        ctaText: 'Ø§Ø¨Ø¯Ø£ ØªØ¬Ø±Ø¨ØªÙƒ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©',
        ctaLink: '#',
        ctaSecondary: 'Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ',
        ctaSecondaryLink: '#',
        showBadges: true,
        showShapes: true
      },
      design: {
        font: "'Cairo', 'Segoe UI', system-ui, sans-serif",
        primaryColor: '#6366f1',
        bgColor: '#0f0f23',
        textColor: '#ffffff',
        padding: 80,
        maxWidth: '1200px'
      }
    },
    app: {
      hero: {
        bgType: 'gradient',
        bgImage: '',
        bgVideo: '',
        overlayColor: '#000000',
        overlayOpacity: 0.2,
        brandName: 'FitTrack',
        headline: 'ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù„Ù„ÙŠØ§Ù‚Ø© Ø§Ù„Ø¨Ø¯Ù†ÙŠØ©',
        subtitle: 'ØªØªØ¨Ø¹ ØªÙ…Ø§Ø±ÙŠÙ†ÙƒØŒ Ø±Ø§Ù‚Ø¨ ØªÙ‚Ø¯Ù…ÙƒØŒ ÙˆØ­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„ØµØ­ÙŠØ© Ù…Ø¹ Ù…Ø¯Ø±Ø¨ Ø°ÙƒÙŠ ÙÙŠ Ø¬ÙŠØ¨Ùƒ',
        ctaText: 'Ø­Ù…Ù‘Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',
        ctaLink: '#',
        ctaSecondary: 'Ù…ØªÙˆÙØ± Ø¹Ù„Ù‰ iOS Ùˆ Android',
        ctaSecondaryLink: '#',
        showBadges: true,
        showShapes: true
      },
      design: {
        font: "'Cairo', 'Segoe UI', system-ui, sans-serif",
        primaryColor: '#22c55e',
        bgColor: '#0a0a0a',
        textColor: '#ffffff',
        padding: 80,
        maxWidth: '1200px'
      }
    },
    personal: {
      hero: {
        bgType: 'gradient',
        bgImage: '',
        bgVideo: '',
        overlayColor: '#000000',
        overlayOpacity: 0.4,
        brandName: 'Ø£Ø­Ù…Ø¯ Ø§Ù„Ù…ØµÙ…Ù…',
        headline: 'Ø£ØµÙ…Ù… ØªØ¬Ø§Ø±Ø¨ Ø±Ù‚Ù…ÙŠØ© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©',
        subtitle: 'Ù…ØµÙ…Ù… UI/UX Ù…ØªØ®ØµØµ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ù…Ù†ØªØ¬Ø§Øª Ø±Ù‚Ù…ÙŠØ© Ø¬Ù…ÙŠÙ„Ø© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
        ctaText: 'ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ',
        ctaLink: '#contact',
        ctaSecondary: 'Ø´Ø§Ù‡Ø¯ Ø£Ø¹Ù…Ø§Ù„ÙŠ',
        ctaSecondaryLink: '#gallery',
        showBadges: true,
        showShapes: true
      },
      design: {
        font: "'Cairo', 'Segoe UI', system-ui, sans-serif",
        primaryColor: '#f59e0b',
        bgColor: '#1a1a2e',
        textColor: '#ffffff',
        padding: 80,
        maxWidth: '1000px'
      }
    }
  };
  
  if (templates[template]) {
    projectData.hero = { ...projectData.hero, ...templates[template].hero };
    projectData.design = { ...projectData.design, ...templates[template].design };
    renderSections();
    updateDesignInputs();
    updatePreview();
    saveState();
    showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨');
  }
}

function showNotification(message) {
  const existing = document.querySelector('.notification');
  if (existing) existing.remove();
  const notif = document.createElement('div');
  notif.className = 'notification';
  notif.textContent = message;
  document.body.appendChild(notif);
  setTimeout(() => notif.remove(), 3000);
}

init();
</script>
</body>
</html>
